#!/usr/bin/env bash

set -ue

SO_PATH="$(dirname $(realpath "$0"))/../build/Release/publicaddr.node"

if [[ -f "$SO_PATH" ]]; then
  echo "[publicaddr] execing node"
  set -x
  LD_PRELOAD="${SO_PATH} ${LD_PRELOAD:-}" exec "$@"
else
  echo "[publicaddr] built module not found. still execing node."
  set -x
  exec "$@"
fi
